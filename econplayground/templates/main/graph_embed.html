{% load static econ_auth %}
<!DOCTYPE html>
<html>
    <head>
        <title>Graph: {{object.title}}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
        <link href="{% static 'css/embed.css' %}" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/epjs.css' %}">
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                {% if debug %}
                    <small>Current user: {{request.user}}</small>
                {% endif %}
                <div id="root"></div>
                <script>
                if (!window.EconPlayground) {
                    window.EconPlayground = {};
                }

                {% user_is_instructor request.user as i_am_instructor %}
                {% if i_am_instructor %}
                window.EconPlayground['isStaff'] = true;
                window.EconPlayground['isInstructor'] = true;
                {% else %}
                window.EconPlayground['isStaff'] = false;
                window.EconPlayground['isInstructor'] = false;
                {% endif %}
                window.EconPlayground['LTIPostGrade'] = '{% url 'lti-post-grade' %}';
                window.EconPlayground['EmbedSuccess'] = '{% url 'graph_embed' object.pk %}?submitted=1';
                window.EconPlayground['EmbedLaunchUrl'] = '{% url 'graph_embed' object.pk %}?submitted=1';
                </script>
                <script src="{% static 'econplayground.js/viewer.js' %}"></script>
            </div>
        </div>
    </body>
</html>
